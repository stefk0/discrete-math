\chapter{Мощност на множества}

\section{Основни понятия}

\begin{itemize}
\item 
  Казваме, че едно множество $A$ е {\bf изброимо безкрайно}\index{множество!изброимо безкрайно}, ако съществува 
  биекция от $A$ върху $\Nat$.
\item
  Едно множество е {\bf изброимо}, ако е или крайно или безкрайно изброимо.
\item
  Казваме, че едно множество $A$ е {\bf неизброимо}\index{множество!неизброимо}, ако $A$ е безкрайно и {\bf не} съществува 
  биекция от $A$ върху $\Nat$.
\item
  Казваме, че мощността на едно множество $A$ е не по-голяма от мощността на множеството $B$, 
  което записваме като $\abs{A} \leq \abs{B}$, ако съществува {\em инекция} $f:A \to B$.
  Възможно е да използваме и означението $A \preceq B$.
\item
  Когато множеството $A$ е крайно, например $A = \{a_1,\dots,a_n\}$, 
  ще записваме $\abs{A} = n$.
\item
  Две множества $A$ и $B$ са равномощни, $|A| = |B|$, ако съществува биекция от $A$ върху $B$.
  Алтернативен запис е $A \sim B$.
\item
  Записваме $\abs{A} < \abs{B}$, ако $\abs{A} \leq \abs{B}$ и $\abs{A} \neq \abs{B}$.
  Алтернативен запис е $A \precneqq B$, т.е. $A \preceq B$ и $A \not\sim B$.
\end{itemize}


\section{Сравняване на мощности}

% \begin{problem}
%   Докажете, че ако $g:A\rightarrow B$ е сюрекция, то $|A|\geq |B|$;
% \end{problem}
% \begin{proof}
%   Понеже $g$ е сюрективна, то $g^{-1}(\{b\}) \neq \emptyset$, за всяко $b \in B$.
%   Да отбележим също, че $b \neq b'$, то $g^{-1}(\{b\}) \cap g^{-1}(\{b'\}) = \emptyset$.
%   Всяка функция $f:B\to A$, която изпълнява свойството, че $f(b) \in g^{-1}(\{b\})$,
%   е инективна и следователно $|B| \leq |A|$.
% \end{proof}

\begin{framed}
\begin{thm}[Кантор-Шрьодер-Бернщайн]
  \index{Кантор-Шрьодер-Бернщайн}
  \label{th:ksb}
  За всеки две множества $A$ и $B$,
  \[A \preceq B\ \&\ B \preceq A \implies A \sim B.\]
\end{thm}
\end{framed}
\begin{proof}
  \marginpar{Според уикипедия това доказателство е на Гюла Кьониг(1906), синът на Денеш Кьониг}
  Без ограничение на общността, нека $A\cap B = \emptyset$.
  Нека също така да фиксираме инективни функции $f:A\rightarrow B$ и $g:B\rightarrow A$.
  Ще построим биективна функция $h:A\rightarrow B$.
  
  Понеже $g$ е инективна, то $g^{-1}$ също е (частична) функция. За $a\in A$, имаме следното:
  \[
  g^{-1}(\{a\}) = 
  \begin{cases}
    \emptyset, & a \not\in Range(g)\\
    \{b\}, & g(a) = b 
  \end{cases}
  \]
  Ако $g^{-1}(\{a\}) = \{b\}$, то наричаме $b$ {\em наследник} на $a$.
  Аналогично, понеже $f$ е инективна, то $f^{-1}$ също е (частична) функция и за $b\in B$:
  \[
  f^{-1}(\{b\}) = 
  \begin{cases}
    \emptyset, & a \not\in Range(f)\\
    \{a\}, & f(b) = a 
  \end{cases}
  \]
  Ако $f^{-1}(\{b\}) = \{a\}$, то казваме, че $a$ е {\em наследник} на $b$.
  Продължавайки същата схема, можем да се опитаме да намерим наследника на $a$ и т.н.
  За елемента $a$ имаме три възможни изхода от тази процедура:
  \begin{enumerate}[i)]
  \item
    $a$ има като последен наследник някой елемент от $A$;
  \item
    $a$ има като последен наследник някой елемент от $B$;
  \item
    $a$ има безкрайно много наследника.
\end{enumerate}
Например, следната верига
\[a \stackrel{g^{-1}}{\longrightarrow} b \stackrel{f^{-1}}{\longrightarrow}a_1 \stackrel{g^{-1}}{\longrightarrow} b_1 \stackrel{f^{-1}}{\longrightarrow}a_2\stackrel{g^{-1}}{\longrightarrow}\emptyset\]
показва, че $a \in A_1$, защото последния наследник на $a$ е елемента $a_2 \in A$.
Да означим множествата:
\begin{align*}
  A_1 = & \{a\in A \mid \mbox{ веригата с начало $a$ завършва с елемент от } A\}\\
  A_2 = & \{a\in A \mid \mbox{ веригата с начало $a$ завършва с елемент от } B\}\\
  A_3 = & \{a\in A \mid \mbox{ веригата с начало $a$ е безкрайна} \}.
\end{align*}
Лесно се съобразява, че $A_1\cup A_2\cup A_3 = A$ и 
множествата $A_1$, $A_2$ и $A_3$ нямат общи елементи.
Аналогично дефинираме:
\begin{align*}
  B_1 = & \{b\in B \mid \mbox{ веригата с начало $b$ завършва с елемент от} A\}\\
  B_2 = & \{b\in B \mid \mbox{ веригата с начало $b$ завършва с елемент от } B\}\\
  B_3 = & \{b\in B \mid \mbox{ веригата с начало $b$ е безкрайна} \}.
\end{align*}
Отново $B_1\cup B_2\cup B_3 = B$ и множествата $B_1$, $B_2$ и $B_3$ нямат общи елементи.

Да разгледаме функциите $f_i = f\upharpoonright{A_i}$ и $g_i = g\upharpoonright{B_i}$, $i = 1,2,3$. 
Лесно се съобразява, че 
\begin{align*}
  f_i:& A_i\to B_i,\\
  g_i:& B_i\to A_i.
\end{align*}
Например, нека $a \in A_1$ и $b = f(a)$. Да съобразим, че наистина $b \in B_1$.
Имаме, че $f^{-1}(\{b\}) = \{a\}$, т.е. $a$ е {\em наследник} на $b$.
Получаваме веригата:
\[b \stackrel{f^{-1}}{\longrightarrow}a \stackrel{g^{-1}}{\longrightarrow} b_1 \stackrel{f^{-1}}{\longrightarrow} a_1 \stackrel{g^{-1}}{\longrightarrow}\dots \stackrel{g^{-1}}{\longrightarrow}a' \in A\]
Това означава, че наистина $b \in B_1$.

Ясно е, че всички тези функции $f_i$, $g_i$ са инективни, $i = 1,2,3$.
За да построим биективна функция $h:A\to B$ е достатъчно да докажем, че 
поне една функция във всяка от двойките $(f_i,g_i)$, $i = 1,2,3$ е биективна.
Тогава ще получим $h$ като ,,слепим'' три такива биекции.
Кои от тях са биективни? Достатъчно е да проверим кои от тях са сюрективни.
Ще разгледаме всички шест функции.
\begin{enumerate}[i)]
\item 
  Да разгледаме $b \in B_1$. Това означава, че веригата започваща с $b$
  завършва в $A$. Следователно, съществува 
  $a \in A_1$, за който $a = f^{-1}(b)$.
  Заключаваме, че $f_1$ е сюрективна и следователно биективна.
\item
  Да разгледаме $b \in B_2$. Това означава, че веригата започваща с $b$
  завършва в $B$.
  Обаче може $b$ изобщо да няма наследници, т.е.
  възможно е $f^{-1}(\{b\}) = \emptyset$.
  Това означава, че може $Range(f_2) \subsetneqq B_2$ и
  нямаме гаранция, че $f_2$ е сюрективна.
\item
  Да разгледаме $b \in B_3$. Това означава, че веригата за $b$
  е безкрайно дълга.
  Следователно, съществува $a \in A_3$, за което $f^{-1}(b) = a$.
  Заключаваме, че $f_3$ е сюрективна и следователно биективна.
\item
  Да разгледаме $a \in A_1$. Това означава, че веригата за $a$
  завършва в $A$. 
  Обаче пак както в {\em ii)} може $a$ изобщо да няма наследници, т.е.
  $g^{-1}(\{a\}) = \emptyset$.
  Това означава, че може $Range(g_1) \subsetneqq A_1$ и 
  може $g_1$ да не е сюрективна.
\item
  Да разгледаме $a \in A_2$. Това означава, че веригата за $a$ завършва в  $B$.
  Следователно, съществува $b \in B_2$, за който $b = g^{-1}(a)$.
  Заключаваме, че $g_2$ е сюрективна и следователно биективна.
\item
  Да разгледаме $a \in A_3$. Това означава, че веригата с начало $a$ е безкрайно дълга.
  Следователно, съществува $b \in B_3$, за което $g^{-1}(a) = b$.
  Заключаваме, че $g_3$ е сюрективна и следователно.
\end{enumerate}

Накрая получаваме, че функциите $f_1,f_3$ и $g_2,g_3$ са биективни.

Да определим биекция $h:A\rightarrow B$ по следния начин:
\[
h(a) =
\begin{cases}
  f_1(a),     & \quad \text{ако $a\in A_1$}\\
  g^{-1}_2(a), & \quad \text{ако $a\in A_2$}\\
  f_3(a),     & \quad \text{ако $a\in A_3$}\\
\end{cases}
\]
Така доказахме, че множествата $A$ и $B$ са {\bf равномощни}, т.е. $A \sim B$.
\end{proof}

\begin{cor}
  Ако $A \subseteq B \subseteq C$ и $A \sim C$, то $B \sim C$.
\end{cor}
% \begin{proof}
%   Понеже $B \subseteq C$, то $\abs{B} \leq \abs{C}$.
%   Понеже $\abs{C} = \abs{A}$, то съществува инекция $g:C \to A$ и $g:C\to B$ също е инекция.
%   Получаваме, че $\abs{C} \leq \abs{B}$.
%   Тогава от \Th{ksb} следва, че $\abs{B} = \abs{C}$.
% \end{proof}

\begin{example}
  Не е лесно да се докаже, че $(0,1)_\Real \sim (0,1]_\Real$ като се посочи биекция.
  Обаче с \Th{ksb} това не е толкова трудно.
  \begin{enumerate}[1)]
  \item 
    Очевидно е, че има инекция $(0,1)_\Real$ в $(0,1]_\Real$;
  \item
    Можем да дефинираме инекция $f:(0,1]_\Real \to (0,1)_\Real$
    като $f(x) = \frac{x}{2}$.    
  \end{enumerate}
  Като имаме 1) и 2), от \Th{ksb} следва, че двете множества са равномощни.
  Макар и да не сме посочили такава биекция, то от теоремата знаем, че тя съществува.  
\end{example}


\begin{framed}
\begin{remark}
  Напълно възможно е за две множества $A$ и $B$ да имаме, че  $B \subsetneqq A$, но $A \sim B$.
  Например, нека $A = \Nat$ и $B = \{2n\mid n\in\Nat\}$.
\end{remark}
\end{framed}

\begin{thm}
  \marginpar{Това означава, че можем да образуваме все по-неизброими множества. Например, $\Ps(\Real)$ има по-голяма мощност от $\Real$}
  Нека $A$ е множество и $\Ps(A)$ е множеството от всички подмножества на $A$.
  Докажете, че $A \precneqq \Ps(A)$.
\end{thm}
\begin{proof}
  Функцията $h:A \to \Ps(A)$ определена като $h(a) = \{a\}$ е инекция.
  Следователно, $A \preceq \Ps(A)$.

  Да допуснем, че $A \sim \Ps(A)$, т.е. 
  съществува биекция $f:A\rightarrow \Ps(A)$.
  Да разгледаме множеството \[B=\{a\in A\ \mid a\notin f(a)\}\in\Ps(A).\]
  Щом $f$ е биекция, съществува {\em единствено} $a_0\in A: f(a_0) = B$.
  Но тогава имаме следното:
  \begin{itemize}
  \item
    ако $a_0\in B$, то $a_0 \not\in f(a_0)$ и тогава $a_0\not\in B$;
  \item
    ако $a_0\not\in B$, то $a_0 \in f(a_0)$ и тогава $a_0\in B$.
  \end{itemize}
  И в двата случая достигаме до противоречие.
  Следователно {\bf не съществува биекция} от $A$ върху $\Ps(A)$.
  Накрая заключаваме, че $A \precneqq \Ps(A)$.
\end{proof}

\section{Изброими множества}

\begin{prop}
  Множеството $\Nat\times\Nat$ е изброимо безкрайно.
\end{prop}
\begin{hint}
  Целта е да намерим биекция от $\Nat\times \Nat$ върху $\Nat$.
  Съществуват много такива функции.
  \begin{enumerate}[a)]
  \item 
    \marginpar{Нарича се Канторово кодиране. Има удобно графично представяне}
    Разгледайте функцията 
    \[\pi(x,y) = \frac{1}{2}((x+y)^2+3x+y).\]
  \item
    Разгледайте функцията
    \[\pi(x,y) = 2^x(2y+1)-1.\]
  \end{enumerate}
\end{hint}

\begin{prop}
  \label{pr:pi-k}
  За всяко $k$, множеството $\Nat^k$ е изброимо безкрайно.
\end{prop}
\begin{hint}
  Индукция по $k \geq 2$.
  \begin{itemize}
  \item 
    За $k = 2$, от предишното твърдение имаме биекцията $\pi:\Nat^2 \to \Nat$.
    Да положим $\pi_2 = \pi$.
  \item
    Нека $k = m+1$.
    Тогава \[\pi_{m+1}(n_1,\dots,n_{m+1}) = \pi_2(\pi_m(n_1,\dots,n_m),n_{m+1}),\]
    където сме използвали биекцията $\pi_m:\Nat^m \to \Nat$, която имаме от {\bf И.П.}
  \end{itemize}
\end{hint}

\begin{cor}
  Ако $A$ е изброимо безкрайно множество, то $A^k$ също е изброимо безкрайно множество,
  където $k \geq 2$ е естествено число.
\end{cor}

\begin{prop}
  Да разгледаме редица от изброимо безкрайни множества $A_0,A_1,\dots$ със свойството, че $i \neq j \implies A_i \cap A_j = \emptyset$.
  Тогава множеството 
  \[B = \bigcup^\infty_{i=0}A_i\] е изброимо безкрайно.
\end{prop}

\begin{framed}
  \begin{thm}[Кантор 1874]
    Множеството на рационалните числа $\Q$ е изброимо безкрайно.
  \end{thm}
\end{framed}
\begin{hint}
  Тук трябва да внимаваме, защото едно рационално число има изброимо много представяния като 
  двойка от вида $\frac{p}{q}$.
  Разгледайте за $n = 1,2,3\dots$ множествата 
  \[Q_n = \left\{\frac{m}{n} \mid m \in \Int\ \&\ \text{НОД}(m,n)=1\right\}.\]
  Всяко от тези множества е изброимо безкрайно.
  Тогава 
  \[\Q = \bigcup_{n\geq 1}Q_n\]
  е изброимо безкрайно множество.
\end{hint}

\begin{problem}
  Докажете, че следните множества са изброимо безкрайни:
  \begin{enumerate}[a)]
  \item 
    $A \cup B$, където поне едното от $A$ и $B$ е изброимо безкрайно;
  \item
    $\bigcup_{i\in\Nat} A_i$, където всяко от множествата $A_i$ да е изброимо безкрайно, за $i = 0,1,2,\dots$;
  \item
    $A \times B$, където поне едно от множествата $A$ и $B$ е изброимо безкрайно;
  \item
    \marginpar{Озн. $A^\star = \bigcup_{n\in\Nat}A^n$}
    $A^\star$, където $A$ е крайна азбука;
  \item
    $A^\star$, където $A$ е изброимо безкрайна азбука;
  \item
    $B$ - множеството от тези думи над азбуката $\{0,1\}$, които не започват с $0$, с изключение на 
    думата $0$, т.е. $B = \{0, 1, 10, 11, 100, 101, 110, 111, \dots\}$;
  \item
    $\Ps_{fin}(\Nat)$ - множеството от всички крайни подмножества от естествени числа;
  \item
    $\Ps_{fin}(A^*)$ - множеството от всички крайни подмножества на $A^*$, за произволна азбука 
    крайна или изброимо безкрайна азбука $A$;
  \item
    съвкупността от всички полиноми на една променлива с цели коефициенти;
  \item
    съвкупността от всички реални алгебрични числа (т.е. корени на полиноми с цели коефициенти).
  \item
    $[0,1]_{\mathbb{Q}} = \{q \in \mathbb{Q} \mid 0 \leq q \leq 1\}$;
  \item
    $[a,b]_{\mathbb{Q}} = \{q \in \mathbb{Q} \mid a \leq q \leq b\}$, за произволни рационални числа $a < b$;
  \end{enumerate}
\end{problem}
\begin{proof}
  \begin{enumerate}[a)]
  % \item
  %   Щом $A \subseteq A\cup B$, то $\abs{A} \leq \abs{A\cup B}$ и следователно
  %   $\abs{\Nat} \leq \abs{A\cup B}$.
  %   Нека $f:A\to \Nat$ и $g:B\to\Nat$ са инекции.
  %   Функцията $h:A\cup B\to \Nat$, определена като:
  %   \begin{align*}
  %     h(x) = 
  %     \begin{cases}
  %       2f(x), & x \in A\setminus B\\
  %       2g(x) + 1, & \mbox{ иначе}
  %     \end{cases}
  %   \end{align*}
  %   също е инекция.
  %   Тогава $\abs{A\cup B} \leq \abs{\Nat}$ и следователно, 
  %   $A\cup B$ е изброимо множество. 
  %   Съобразете, че $A\cup B$ е също така и безкрайно.
  \item[г)]
    Нека $A = \{a_1,\dots,a_k\}$.
    Лесно се съобразява, че $\abs{A^n} = k^n$.
    За някое $n$, да разгледаме множеството от думи 
    \[A^n = \{\alpha^n_{1},\alpha^n_{2},\dots, \alpha^n_{{k^n}}\}.\]
    \marginpar{\todo Докажете, че $f$ е биекция!}
    Можем да дефинираме инективната функция $f_n : A^n \to \Nat$ като
    \[f_n(\alpha^n_{i}) = \sum_{i<n} k^i + i.\]
    Понеже $A^n \cap A^{n+1} = \emptyset$, 
    то $f = \bigcup_n f_n : A^\star \to \Nat$ е функция.
  \item[д)]
    Нека $\kappa:\Nat \to A$ е биекция.
    Да изброим всички букви като $a_i = \kappa(i)$ за $i = 0,1,2,\dots$.
    \marginpar{\todo Докажете, че $f$ е биекция!}
    Дефинираме биекция $f:A^\star \to \Nat$ по следния начин:
    \[f(a_0,\dots,a_n) = \pi(n, \pi_{n+1}(a_0,\dots,a_n)),\]
    където използваме функциите дефинирани в Твърдение \ref{pr:pi-k}.
  \item[ж)]
    Нека на крайното множество от естествени числа
    \[D = \{n_0 < n_1 < \cdots < n_k\}\]
    да съпоставим числото $v = 2^{n_0} + 2^{n_1} + \cdots + 2^{n_k}$, което ще наричаме код на $D$.
    \marginpar{Ако $D = \{1,3,4\}$, то $v = (11010)_2 = 26$}
    С $D_v$ ще означаваме крайното множество с код $v$.
    Разгледайте $f:\Nat \to \Ps_{fin}(\Nat)$ дефинирана като
    \marginpar{\todo Докажете, че $f$ е биекция!}
    $f(v) = D_v$.
  % \item[к)]
  %   Всеки помином може да се представи като дума над азбуката $\Nat$.
  % \item[м)]
  %   Да разгледаме инективната функцията $f:\Nat \to [0,1]_{\mathbb{Q}}$ определена като:
  %   \[f(n) = \frac{1}{2^n}.\]
  %   Използвайте теоремата на Кантор-Шрьодер-Бернщайн.
  % \item[н)]
  %   Да фиксираме $a < a_1 < b_1 < b$.
  %   Дефинираме $f:\Nat \to [a,b]_{\mathbb{Q}}$ по следния начин:
  %   \begin{align*}
  %     & f(0) = \frac{a_1+b_1}{2}\\
  %     & f(n+1) = \frac{a_1+f(n)}{2}.
  %   \end{align*}
  \end{enumerate}
\end{proof}

\begin{problem}
  Нека $A$ е изброимо безкрайно множество.
  Докажете, че всяко $I \subseteq A$ е изброимо безкрайно или крайно.
\end{problem}
\begin{hint}
  Достатъчно е да разгледаме случая $A = \Nat$.
  Да разгледаме безкрайното подмножество $I \subseteq \Nat$.
  За да докажем, че то е {\em изброимо}, ще построим биекция $f:\Nat \to I$.
  Нека
  \begin{align*}
    f(0)   & = \min\{i \mid i \in I\}\\
    f(n+1) &= \min\{i \mid i \in I \setminus\{f(0),\dots,f(n)\}\}.
  \end{align*}
  Докажете, че $f$ е биекция от $\Nat$ върху $I$.
\end{hint}

\section{Неизброими множества}

\begin{problem}
  Докажете, че $\Nat^\Nat = \{f \mid f:\Nat \to \Nat\}$ е неизброимо.
\end{problem}
\begin{proof}
  Ще приложим метода на диагонализацията. 
  Да допуснем, че $\Nat^\Nat$ е изброимо.
  Тогава можем да подредим в редица всички функции \[f_0,f_1,f_2,\dots.\]
  Дефинираме функция $\kappa$, като $\kappa(i) = f_i(i)+1$.
  Да допуснем, че $\kappa = f_n$, за някое $n$.
  Но $\kappa(n) = f_n(n)+1 \neq f_n(n)$, следователно стигаме до противоречие.
  Заключаваме, че $\Nat^\Nat$ е неизброимо.
\end{proof}

\begin{framed}
  \begin{thm}[Кантор]
    \index{Кантор}
    Затвореният интервал от реални числа $[0,1]_\Real$ е неизброим.
  \end{thm}
\end{framed}
\begin{proof}
  Да допуснем, че интервалът $[0,1]_\Real$ е изброим. 
  Това означава, че можем да изброим всички елементи в една редица :
  \[[0,1]_\Real = \{r_1,r_2,\dots,r_n,\dots\}.\]
  Целта ни е да докажем, че съществува реално число $r \in [0,1]_\Real$,
  което не принадлежи на тази редица.

  Нека $I_0 = [0, 1]$, $a_0 = 0$, $b_0 = 1$.
  Да разгледаме интервалите $[0,1/3]$, $[1/3,2/3]$ и $[2/3,1]$ 
  и да означим като $I_1 = [a_1,b_1]$ един от тях, за който $r_1 \not\in I_1$.
  Ясно е, че $b_1-a_1 = 1/3$ и $[a_1,b_1] \subset [a_0,b_0]$.
  Продължаваме процедурата като разгледаме интервала $[a_1,b_1]$ разделен пак на три равни части.
  Избираме една от тези части $I_2 = [a_2,b_2]$, за която $r_2 \not\in [a_2,b_2]$.
  Ясно е, че $b_2-a_2 = 1/3^2$ и $[a_2,b_2] \subset [a_1,b_1]$.
  По този начин продължаваме процедурата като на стъпка $n+1$ 
  избираме интервал 
  \[I_{n+1} = [a_{n+1},b_{n+1}],\] за който $r_{n+1} \not\in [a_{n+1},b_{n+1}]$.
  Тогава $b_{n+1}-a_{n+1} = 1/3^{n+1}$ и $I_{n+1} \subset I_n$.

  Накрая получаваме безкрайна редица $\{I_n\}_{n\in\Nat}$, като имаме свойствата:
  \[(\forall n)[I_{n+1}\subset I_n],\]
  \[0\leq a_n \leq a_{n+1} < b_{n+1} \leq b_n \leq 1.\]
  Редиците $\{a_n\}$ и $\{b_n\}$ са монотонни и ограничени, следователно са сходящи 
  (т.е. съществуват $\lim_{n\to\infty} a_n$ и $\lim_{n\to\infty} b_n$).
  Освен това, от \[(\forall n)[b_n-a_n \leq 1/3^n]\] следва, че 
  \[\lim_{n\to\infty}(b_n-a_n) = 0\] и тогава съществува реално число 
  \[r = \lim_n a_n = \lim_n b_n.\]
  За това число $r$,
  \[(\forall n)[r \neq r_n],\]
  защото $r \in I_n$, но $r_n \not\in I_n$.
  Достигаме до противоречие.
  Следователно заключаваме, че не можем да подредим всички реални числа в интервала $[0,1]_\Real$
  в една редица.
\end{proof}

\begin{problem}
  Докажете, че отвореният интервал от реални числа $(0,1)_\Real$ е неизброимо множество.
\end{problem}
\begin{proof}
  Да допуснем, че интервалът $(0,1)_\Real$ е изброим. Това означава, че можем да подредим всички елементи на $(0,1)_\Real$ в редица.
  Да представим всяко реално число в интервала $(0,1)_\Real$ в неговата десетична форма.
  Някои реални числа могат да имат по две десетични форми.
  Например, 
  \[0.2 = 0.1999999\dots.\]
  Нека винаги избираме тази, която започва с по-малко число, например избираме $0.1999\dots$ вместо $0.2$.
  Да подредим всички реални числа в интервала $(0,1)_\Real$ в редица:
  \begin{align*}
    r_0 & = 0.d_{00}d_{01}d_{02}\dots\\
    r_1 & = 0.d_{10}d_{11}d_{12}\dots\\
    \vdots\\
    r_n & = 0.d_{n01}d_{n1}d_{n2}\dots\\
    \vdots\\
  \end{align*}

  Да изберем две различни числа между 1 и 9. Например, 5 и 7.
  Нека 
  \begin{align*}
    k_i = 
    \begin{cases}
      5, & \mbox{ ако } d_{ii} = 7,\\
      7, & \mbox{ ако } d_{ii} \neq 7.
    \end{cases}
  \end{align*}
  Дефинираме $\kappa$ като реалното число, което има десетично представяне $0.k_0k_1k_2\dots$.
  Ясно е, че $\kappa \in (0,1)_\Real$. Ще покажем, че $\kappa \neq r_n$ за всяко $n$.
  Да отбележим, че понеже в $\kappa$ не участват редици от $0$-ли или $9$-ки, то със сигурност 
  реалното число $\kappa$ има единствено десетично представяне.
  Да допуснем, че $\kappa = r_n$, за някое $n$.
  Но $k_{nn} \neq d_{nn}$, следователно стигаме до противоречие.
  Заключаваме, че $(0,1)_\Real$ е {\bf неизброимо}.
\end{proof}

\begin{remark}
  От последната задача директно следва, че множеството $\Real$ е {\bf неизброимо} безкрайно.
\end{remark}


В следващата задача ще видим, че е удобно да можем да представяме 
всяко реално число в двоична бройна система.
Например,
\begin{align*}
  5.375 & = (1.2^2 + 0.2^1 + 1.2^0).(0.2^{-1} + 1.2^{-2} + 1.2^{-3} + 0.2^{-4} + 0.2^{-5} + \dots)\\
  & = (101.011)_2\\
  1 & = 0.(1.2^{-1} + 1.2^{-2} + 1.2^{-3} + 1.2^{-4} + 1.2^{-5} + \dots)\\
  & = (0.11111\dots)_2.
\end{align*}
Естествено, много реални числа ще имат безкраен запис в двоична бройна система.
Да разгледаме $\pi = 3.14159\dots$ и да видим как можем да намираме все по-добри негови 
апроксимации в двоична бройна система.
Да умножим $\pi$ по $2^3$. Получаваме число между $25$ и $26$. 
$25 = (11001)_2$ и следователно двоичният запис на $\pi$ започва с $(11.001)_2$, т.е.
преместваме двоичната точка $3$ места наляво. Да проверим дали това наистина е така.
Сега ако умножим $\pi$ по $2^6$, получаваме число между $201$ и $202$.
$201 = (11001001)_2$. Наистина, двоичният запис на $\pi$ започва с $(11.001001)_2$,
т.е. преместване двоичната точка $6$ места наляво.
% \end{framed}

% \begin{problem}
%   Множеството $\Ps(\Nat)$ е равномощно с това на затворения интервал от реални числа $[0,1]$.
% \end{problem}
% \begin{proof}
%   Ще използваме Теорема \ref{th:ksb}. За целта, първо ще докажем $|\Ps(\Nat)|\leq |[0,1]|$ и след това $|[0,1]|\leq |\Ps(\Nat)|$.
%   \begin{enumerate}[1)]
%   \item 
%     \marginpar{На практика доказваме, че $|\Ps(\Nat)| \leq |(0,1)|$}
%     Ще докажем $|\Ps(\Nat)|\leq |[0,1]|$.
%     Дефинираме $h:\Ps(\Nat)\to [0,1]$ като на всяко подмножество от естествени числа съпоставяме реално число в десетичен запис.
%     \[h(S) = 0.d_0d_1d_2\dots,\mbox{ където } d_i = 1,\mbox{ ако }i\in S\mbox{, иначе } d_i = 0.\]
%     Например,
%     \begin{enumerate}[]
%     \item
%       $h(\emptyset) = 0.0000\dots$
%     \item
%       $h(\{0\}) = 0.100000\dots$
%     \item
%       $h(\{1,2\}) = 0.011000000\dots$
%     \item
%       $h(\Nat) = 0.11111111111\dots$
%     \end{enumerate}
%     Лесно се вижда, че $h$ е инекция, следователно $|\Ps(\Nat)|\leq|[0,1]|$.
%   \item
%     Ще докажем $\abs{[0,1]} \leq \abs{\Ps(\Nat)}$.
%     Сега ще построим инекция $g:[0,1]\to\Ps(\Nat)$, като
%     за всеки елемент $b\in[0,1]$ избираме едно негово {\em двоично представяне} (може да има повече от едно)
%     $b = (0.b_0b_1b_2\dots)_2$ и дефинираме \[g(b) = \{i\in\Nat\mid b_i = 1\}.\]
%   \end{enumerate}
  
%   Ето няколко примера:
%   \begin{enumerate}[]
%   \item
%     $g(0) = g((0.00000\dots)_2) = \emptyset$.
%   \item
%     $g(1/4) = g((0.01000\dots)_2) = \{1\}$.
%   \item
%     $g(1/2) = g((0.10000\dots)_2) = \{0\}$.
%   \item
%     $g(3/4) = g((0.1100000\dots)_2) = \{0,1\}$.
%   \item
%     $g(3/8) = g((0.01100000\dots)_2) = \{1,2\}$.
%   \item
%     $g(1) = g((0.1111111\dots)_2) = \Nat$.
%   \end{enumerate}
  
%   Едно число може да има две представяния, но ние сме сигурни, че различни числа имат различни преставяния.
% \end{proof}

\begin{problem}
  Докажете, че следните множества са равномощни и следователно са {\bf неизброими}.
  \begin{enumerate}[a)]
  \item
    Множеството на реалните числа $\Real$;
  \item
    $(0,1)_\Real = \{x \in \Real \mid 0 < x < 1\}$;
  \item
    $[0,1]_\Real = \{x \in \Real \mid 0 \leq x \leq 1\}$;
  \item
    $(a,b)_\Real = \{x \in \Real \mid a < x < b\}$, където $a<b$ са произволни реални числа.
  \end{enumerate}
\end{problem}
\begin{hint}
  \begin{description}
  \item[а) $\leftrightarrow$ б)]
    Един начин е да използваме \Th{ksb}. Това означава, че е достатъчно да дефинираме инекция $f:\Real \to (0,1)_\Real$.

    % За определеност, ако $r$ има повече от едно представяния, нека сме избрали това, което е по-голямо относно лексикографската наредба.
    % Например, ако $r = 31.999999\cdots = 32.00000\cdots$, то избираме $32.0000000\cdots$.
    % На всяко реално число \[r=r_1r_2\cdots r_n.p_1p_2\cdots p_k \cdots,\]
    % където $r_1 \neq 0$, съпоставяме реалното число в интервала $(0,1)_\Real$:
    % \[r' = 0.\underbrace{7\cdots 7}_{n+1} r_1r_2\cdots r_np_1p_2\cdots p_k \cdots.\]
    % Докажете, че функцията $f(r) = r'$ е инективна.
    Едно решение можем да получим като разгледаме следните функции:
    \begin{itemize}
    \item 
      $f_1: (1,\infty)_\Real \to (0,\frac{1}{4})_\Real$ е инекция дефинирана като
      \[f_1(x) = \frac{1}{4x}.\]
    \item
      $f_2: [0,1]_\Real \to [\frac{1}{4},\frac{1}{2}]_\Real$ е инекция дефинирана като
      \[f_2(x) = \frac{1}{4} + \frac{x}{4}.\]
    \item
      $f_3: (-1,0)_\Real \to (\frac{1}{2},\frac{3}{4})_\Real$ е инекция дефинирана като
      \[f_3(x) = \frac{1}{2} - \frac{x}{4}.\]
    \item
      $f_4: (-\infty,-1]_\Real \to (\frac{3}{4},1]_\Real$ е инекция дефинирана като
      \[f_4(x) = \frac{3}{4} - \frac{1}{4x}.\]
    \end{itemize}

    Идеята на второто решение е да кодираме реалните числа като потенциално безкрайни думи
    над азбуката $\{0,1,2\}$. 
    Нека първо да разгледаме реалните числа в двоичен запис.
    \marginpar{Например, $(7.25)_{10} = (111.01)_2$}
    Ако едно реално число има две представяния в двоичен запис, то взимаме по-голямото от двете в лексикографската наредба.
    Сега на реалното число $r$ съпоставяме една крайна дума $r_1\cdots r_n$ и (потенциално безкрайна) дума $p_1\cdots p_k\cdots$, такива че
    \[(r)_{10} = (r_1\cdots r_n.p_1p_2\cdots p_n \cdots)_2,\]
    и трябва да помним дали числото е положително или отрицателно.
    Сега да разгледаме следната (потенциално безкрайна) дума над азбуката $\{0,1,2\}$:
    \[\hat{r} = \underbrace{0\cdots 0}_{i}\underbrace{2\cdots 2}_{n+1}r_1r_2\cdots r_n p_1p_2\cdots, \]
    където $i = 0$ ако $r$ е положително, $i = 1$ ако $r$ е отрицателно, и $i = 2$ ако $r = 0$.
    \marginpar{\todo Проверете дали това е инекция!}
    Накрая, функцията $f(r) = (0.\hat{r})_{10}$ е инективна функция от $\Real$ в $(0,1)_\Real$.
    
    Трето решение ще бъде директно, без позоваване на \Th{ksb}.
    Знаем, че $\tan: (-\pi/2,\pi/2) \to \Real$ е биекция.
    Освен това, $f: (0,1) \to (-\pi/2,\pi/2)$, дефинирана като
    \[f(x) = \pi/2 - \pi x\] също е биекция.
    Тогава композицията на двете функции $\tan\circ f : (0,1) \to \Real$ е биекция.    
    
    % Като четвърто решение, да разгледаме $f:(0,1)_\Real \to \Real$, където
    % \[f(x) = \frac{1}{x} + \frac{1}{1-x}.\]
    % Докажете, че $f$ е биективна.
  \item[a) $\leftrightarrow$ в)]
    Използвайте \Th{ksb} с едно от първите две решения на а) $\leftrightarrow$ б).
  \item[б) $\leftrightarrow$ г)]
    \marginpar{\todo Проверете, че $f$ е биекция!}
    Разгледайте функцията $f: (0,1)_\Real \to (a,b)_\Real$, където
    \[f(x) = a + (b-a)x.\]
  \end{description}
\end{hint}


\begin{problem}
  Докажете, че следните множества са равномощни и следователно са {\bf неизброими}.
  \begin{enumerate}[a)]
  \item
    $\Ps(\Nat) = \{A \mid A \subseteq \Nat\}$;
  \item
    $(0,1)_\Real = \{r \in \Real \mid 0 < r < 1\}$;
  \item
    $\Nat^\Nat = \{f\ \mid\ f:\Nat\to\Nat\text{ тотална}\}$.
  \item
    $2^\Nat = \{f\ \mid\ f:\Nat\to\{0,1\}\text{ тотална}\}$
  \end{enumerate}
\end{problem}
\begin{hint}
  \begin{description}
  \item[а) $\rightarrow$ б)]
    \marginpar{За а) $\rightarrow$ б) и б) $\rightarrow$ а) строим две инекции. След това използваме \Th{ksb} за да получим биекция между множествата от  а) и б)}
    Дефинираме $h:\Ps(\Nat)\to (0,1)$ като на всяко подмножество от естествени числа съпоставяме реално число в десетичен запис.
    \[h(S) = 0.d_0d_1d_2\dots,\mbox{ където } d_i = 1,\mbox{ ако }i\in S\mbox{, иначе } d_i = 0.\]
    Например,
    \begin{itemize}
    \item
      $h(\emptyset) = 0.0000\dots$
    \item
      $h(\{0\}) = 0.100000\dots$
    \item
      $h(\{1,2\}) = 0.011000000\dots$
    \item
      $h(\Nat) = 0.11111111111\dots$
    \end{itemize}
    Лесно се вижда, че $h$ е инекция, следователно $|\Ps(\Nat)|\leq|(0,1)|$.

  \item[б) $\rightarrow$ а)]
    Ще построим инекция $g:(0,1)_\Real\to\Ps(\Nat)$, като
    за всеки елемент $b\in (0,1)_\Real$ избираме едно негово {\em двоично представяне} (може да има повече от едно)
    $b = (0.b_0b_1b_2\dots)_2$ и дефинираме \[g(b) = \{i\in\Nat\mid b_i = 1\}.\]
    За определеност, ако едно реално число има повече от едно представяния, избираме това, което е най-голямо относно лексикографската наредба.
    Например, 
    \[1/2 = (0,100000\dots)_2 = (0,011111\dots)_2.\]

    Ето няколко примера:
    \begin{itemize}
    \item
      $g(0) = g((0.00000\dots)_2) = \emptyset$.
    \item
      $g(1/4) = g((0.01000\dots)_2) = \{1\}$.
    \item
      $g(1/2) = g((0.10000\dots)_2) = \{0\}$.
    \item
      $g(3/4) = g((0.1100000\dots)_2) = \{0,1\}$.
    \item
      $g(3/8) = g((0.01100000\dots)_2) = \{1,2\}$.
    \item
      $g(1) = g((0.1111111\dots)_2) = \Nat$.
    \end{itemize}
    
    Едно число може да има две представяния, но ние сме сигурни, че различни числа имат различни представяния.
  \item[а) $\rightarrow$ г)]
    Да разгледаме едно множество $A \subseteq \Nat$.
    Съпоставяме на $A$ функцията $f_A:\Nat \to \{0,1\}$  по следния начин:
    \marginpar{$f_A$ се нарича характеристична функция за $A$}
    \[
    f_A(n) = 
    \begin{cases}
      1, & n \in A\\
      0, & n\not\in A.
    \end{cases}
    \]
    Проверете какви свойства има функцията $h:\Ps(A) \to 2^\Nat$ дефинирана като $h(A) = f_A$.
  \item[г) $\rightarrow$ а)]
    Да разгледаме функцията $f:\Nat\to\{0,1\}$.
    На нея съпоставяме множеството $A_f = \{n \in \Nat \mid f(n) = 1\}$.
    Проверете какви свойства има функцията $h:2^\Nat \to \Ps(A)$ дефинирана като $h(f) = A_f$.
  \item[б) $\rightarrow$ в)]
    Да разгледаме една функция $f:\Nat\to\Nat$.
    На нея съпоставяме реалното число $r_f \in (0,1)_\Real$, където
    \[r_f = 0,\underbrace{00\dots 0}_{f(0)+1}1\underbrace{00\dots 0}_{f(1)+1}1\dots\underbrace{00\dots 0}_{f(2)+1}1\dots\]
    Проверете какви свойства има функцията $h:\Nat^\Nat \to (0,1)_\Real$ дефинирана като $h(f) = r_f$.
  \item[в) $\rightarrow$ б)]
    Да разгледаме едно реално число $r\in (0,1)_\Real$, където
    \[r = 0, r_0r_1r_2r_3\dots\]
    На това число съпоставяме функцията $f_r:\Nat\to\Nat$ като $f_r(n) = r_n$.
    Проверете какви свойства има функцията $h:(0,1)_\Real \to \Nat^\Nat$ дефинирана като $h(r) = f_r$.
  % \item[б) $\rightarrow$ е)]
  %   Всяко реално число $r$ може да се представи като безкрайна редица от рационални числа $\{q_n\}$,
  %   за която $\lim_n q_n = r$.
  %   Понеже има биекция между рационалните и естествените числа, то на всяко реално $r$ число може да се съпостави
  %   функция $f_r:\Nat\to \mathbb{Q}$, за която $\lim_n f_r(n) = r$.
  %   Следователно, имаме сюрекция от $\Nat^\Nat$ върху $\Real$, т.е. $\abs{\Real} \leq \abs{\Nat^\Nat}$.
  \end{description}
\end{hint}

\section{Задачи}

\begin{problem}
  \marginpar{Озн. $B^A = \{f \mid f:A\to B\}$}
  Нека $A \sim B$ и $C \sim D$. Докажете, че $B^A \sim D^C$.
\end{problem}

\begin{problem}
  
  \begin{enumerate}[a)]
  \item
    $(A, B) \in R_n \iff |A \cap B| = n$, за произволно $n \in \Nat$;
  \item
    $(A, B) \in R_n \iff |A \cup B| = n$, за произволно $n \in \Nat$;
  \item
    $(A,B) \in R \iff |A \setminus B| \leq |B\setminus A|$;
  \item 
    $(A,B) \in R \iff |A \setminus B| = |B\setminus A|$;
  \end{enumerate}
\end{problem}


% \section*{Библиография}
% \begin{enumerate}[]
% \item 
%   Много задачи могат да се намерят в \cite[§1.4]{lavrov-maksimova}.
% \item
%   Добро изложение може да се намери в \cite[Глава 7]{prove-it}.
% \end{enumerate}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "discrete-math"
%%% End: 
