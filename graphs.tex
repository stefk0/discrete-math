\chapter{Теория на Графите}
\index{граф}

\section{Основни понятия}

\begin{itemize}
\item
  \marginpar{Понякога се казва ориентиран или насочен граф}
  {\bf Граф} e наредена двойка от вида $G = (V,E)$, 
  където
  \begin{itemize}
  \item 
    $V$ е крайно множество от върхове;
  \item
    $E$ е бинарна релация над $V$.
  \item
    Двойките $(u,v) \in E$ се наричат {\bf ребра} в графа $G$.
  \end{itemize}
\item
  {\bf Примка} в графа $G = (V,E)$ е ребро от вида $(v,v) \in E$.
\item
  \index{граф!неориентиран}
  {\bf Неориентиран граф} e граф $G = (V,E)$, 
  където релацията $E$ е {\em симетрична}.
\item
  \index{граф!прост}
  \marginpar{Не позволяваме примки}
  {\bf Прост граф} e неориентиран граф $G = (V,E)$,
  където релацията $E$ е {\em антирефлексивна}.
\item
  Един прост граф $G = (V,E)$ се нарича {\bf пълен}, ако
  \[(\forall u,v\in V)[u \neq v \to (u,v) \in E].\]
\item
  {\bf Път} в графа $G = (V,E)$ представлява редица от различни върхове на $V$
  \[\pi = (v_0,v_1,\dots,v_{n}),\]
  със свойството, че за всяко $i < n$,
  $(v_i,v_{i+1}) \in E$.
\item
  {\bf Цикъл} в графа $G = (V,E)$
\item
  {\bf Степен} на връх $u$ в графа $G = (V,E)$ означаваме
  \[deg_G(u) = |\{v \in V \mid \pair{u,v} \in E\}|.\]
  Ако един връх $v$ има степен $0$, то той се нарича {\bf изолиран}.
\item
  За един граф $G = (V,E)$, да въведем означенията:
  \begin{align*}
    & \nu(G) = \abs{V}\\
    & \varepsilon(G) = \abs{E}\\
    & \delta(G) = \min\{deg_G(v) \mid v \in V\}\\
    & \Delta(G) = \max\{deg_G(v) \mid v \in V\}.
  \end{align*}
  Когато разглежданият граф $G$ се подразбира, ще пишем просто $\nu, \varepsilon, \delta, \Delta$.
\item
  Веднага можем да съобразим, че в един прост граф $G$,
  \[\varepsilon(G) \leq \binom{\nu(G)}{2}.\]
\end{itemize}

\begin{problem}
  Докажете следното неравенство:
  \[\delta \leq \frac{2\varepsilon}{\nu} \leq \Delta.\]
\end{problem}
\begin{proof}
  \[\nu\delta \leq\sum_{1\leq i \leq\nu} deg_G(v_i) \leq \nu\Delta.\]
\end{proof}

\begin{problem}
  За $G$ прост граф, докажете, че $\varepsilon = \binom{\nu}{2}$ точно тогава, когато $G$ е пълен.
\end{problem}
% \begin{proof}
%   Провеждаме доказателството с индукция по $\nu$. 
%   За индукционната стъпка използваме следното равенство:
%   \[\binom{\nu+1}{2} = \sum^2_{i=0}\binom{\nu}{i}\binom{1}{2-i} = \nu + \binom{\nu}{2}.\]
  
%   Нека $G^\prime$ е прост граф с $\nu^\prime = n+1$, за който $\varepsilon^\prime = \binom{\nu^\prime}{2} = \nu + \binom{\nu}{2}$.
%   Тогава по и.п., то е ясно, че $G^\prime$ е пълен.
  
%   Ако $G^\prime$ е пълен, то е ясно, че всеки подграф $G$ с $\nu = n$ също е пълен.
%   По и.п., $\varepsilon = \binom{\nu}{2}$. Получаваме $G$, като свържем $v_{n+1}$ с всеки друг връх $v_1,\dots,v_n$.
%   Получаваме, че \[\varepsilon^\prime = \nu + \varepsilon = \nu + \binom{\nu}{2} = \binom{\nu^\prime}{2}.\]
% \end{proof}
\begin{problem}
  Докажете, че в прост граф с $\nu\geq 2$, има поне два върха с еднаква степен.
\end{problem}
\begin{proof}
  Да допуснем, че $d_G(v_i)\neq d_G(v_j)$, за $i\neq j$ и $i,j < \nu$.
  Тогава имаме връх със степен $\geq \nu$. Това е противоречие с условието, че графът е прост.
\end{proof}

\begin{problem}
  Колко графа с $n$ върха и $m$ ребра има, които са:
  \begin{enumerate}[a)]
  \item
    прости, т.е. неориентирани, без повтарящи се ребра и без примки;
  \item
    ненасочени и прости;
  \item
    неориентирани, но не непременно прости;
  \item
    ориентирани, без примки и без повтарящи се ребра;
  \item
    ориентирани и прости;
  \item
    насочени, но не непременно прости.
\end{enumerate}
\end{problem}
\begin{proof}
  \begin{enumerate}[a)]
  \item
    Всеки прост граф има най-много $\binom{n}{2}$ на брой ребра.
    От всички тези ребра, броят на комбинациите, по които можем да изберем $m$ ребра е 
    $\binom{\binom{n}{2}}{m}$.
  \item
    $\binom{m+\binom{n}{2}-1}{m}$
  \item
    $\binom{m+\binom{n}{2}+n-1}{m}$
  \item
    Всеки такъв граф има най-много $n(n-1)$ на брой ребра, защото
    от всеки връх може да има ребро до всички останали $n-1$ върха.
    От всички тези ребра, броят на комбинациите, по които можем да изберем $m$ на брой ребра е
    $\binom{n(n-1)}{m}$.
  \item
    $\binom{m+n(n-1)-1}{m}$
  \item
    $\binom{m+n^2-1}{m}$.
  \end{enumerate}
\end{proof}

\begin{problem}
  Докажете, че:
  \begin{enumerate}
  \item
    във всеки неориентиран граф броят на върховете с нечетна степен е четен;
  \item
    всеки регулярен граф с нечетна степен има четен брой върхове;
  \item
    всеки прост граф с $\varepsilon > \binom{\nu-1}{2}$ е свързан;
  \item
    ако в графа $G$ всеки връх има степен поне $d$, то в $G$ има прост път с дължина $d$.
  \end{enumerate}
\end{problem}
\begin{proof}
  \begin{enumerate}
  \item
    Лесно, като се използва, че $\sum_{v\in V} deg_G(v) = 2\varepsilon$ е четно.
  \item
    Пак лесно.
  \item
    Задачата се решава с индукция по броят на върховете.
    Да допуснем, че твърдението е вярно за всички графи $G$ с $\nu(G)\leq n$.
    Да вземем граф $G(V,E)$ с $\nu(G) = n+1$ и $\varepsilon>\binom{\nu-1}{2}$ и да допуснем, че 
    $G$ не е свързан. Това означава, че има върхове $v_i,v_j\in V$, между които няма път.
    Да вземем произволен връх $p\in V$, различен от $v_i,v_j$.
    Ясно е, че $d_G(p) \leq \nu-2 = n-1$, защото $(p,v_j)\not\in E$ или $(p,v_i)\not\in E$ и няма примки.
    Да разгледаме графа $G^\prime(V^\prime,E^\prime)$, където $V' = V\backslash{\{p\}}$ и 
    $E^\prime$ се получава от $E$ като махнем всички ребра с един край $p$.
    Тогава \[\varepsilon^\prime \geq \varepsilon - (n-1) > \frac{n(n-1)}{2} - (n-1) = \frac{(n-1)(n-2)}{2}.\]
    От индукционното предположение, $G^\prime$ е свързан граф, но $v_i,v_j\in V'$ и между тях няма път.
    Така достигаме до противоречие.
  \item
    Да разгледаме един най-дълъг прост път $\pi$ в $G$.
    Нека $\pi$ има дължина $p$. Последният връх в $\pi$ има степен $\geq d$ и всички върхове, 
    с които е свързан са в $\pi$, защото иначе ще можем да образуваме по-дълъг прост път.
    Следователно, $p \leq d+1$ и съществува път с дължина $d$.
  \end{enumerate}
\end{proof}

\begin{remark}
  Ако за графът $G$ е изпълнено \[\binom{\nu-1}{2} < \varepsilon \leq \binom{\nu}{2},\]
  то той със сигурност е свързан.
\end{remark}

Един прост граф $G$ се нарича {\bf самодопълнителен}, ако  $G\cong\overline{G}$.

\begin{problem} % зад 1.20
  \begin{enumerate}
  \item
    Покажете, че ако един граф е самодопълнителен, то броят на върховете в него е равнен или на $4l$ ($l\geq 1$), или на $4l+1$ ($l\geq 0$);
  \item
    Докажете, че измежду 4-връхните графи има точно един самодопълнителен, а измежду 5-връхните графи има точно два самодопълнителни;
  \item
    Покажете, че всеки самодопълнителен граф е свързан;
  \item
    Докажете, че диаметърът на самодопълнителен нетривиален граф $G$ удовлетворява неравенството $2\leq diam(G) \leq 3$.
\end{enumerate}
\end{problem}
\begin{proof}
  \begin{enumerate}
  \item
    Ние вече знаем, че максималният брой ребра в един прост граф е $I = \binom{\nu}{2}$.
    \[\varepsilon(G) + \varepsilon(\overline{G}) = \binom{\nu}{2}\ \&\ \varepsilon(G) = \varepsilon(\overline{G}).\]
    Следователно, $I$ е четно, което е възможно само ако $\nu = 4l,4l+1$.
  \item
  \item
    Знаем, че поне един от $G$ и $\overline{G}$ е свързан.
    Но тъй като те са изоморфни следва, че и двата са свързани.
    Тогава със сигурност имаме, че $G$ е свързан.
  \item
    Очевидно, $diam(G)\geq 2$. Ако $diam(G) > 3$, то ние знаем, че $diam(\overline{G})\leq 3$.
    Но тогава, имаме противоречие с $G\cong\overline{G}$.
    Следователно, $diam(G)\leq 3$.
  \end{enumerate}
\end{proof}


\begin{problem} % зад. 1.22
  Да разгледаме графа $G$ (без примки и без кратни ребра) със $s$ компоненти на свързаност.
  Докажете, че $\nu - s \leq \varepsilon \leq \binom{\nu-s+1}{2}$.
\end{problem}
\begin{proof}
  За $s = 1$ е ясно.
  Да разгледаме случая $s = 2$.
  Нека $1 < x <\nu$. Искаме да докажем, че 
  \[\binom{x}{2} + \binom{\nu-x}{2} \leq \binom{\nu-1}{2} = \binom{\nu-x}{2} + \binom{x-1}{2} + \binom{\nu-x}{1}\binom{x-1}{1}\]
  \[\binom{x}{2} \leq \binom{x-1}{2} + (\nu-x)(x-1)\]
  \[x-1 \leq (\nu-x)(x-1) \iff 1 \leq \nu - x \iff 1 < x < \nu\]
  Следователно, точната горна граница за $\varepsilon$ е $\binom{\nu - 1}{2}$. 
  Очевидно е, че точната долна граница за $\varepsilon$ е $\nu - 2$.
  Сега лесно се доказва задачата с индукция.
  Нека всяка компонента има по $n_i$ ребра. 
  \[\sum^{s+1}_{i=1}\binom{n_i}{2} = \sum^{s}_{i=1}\binom{n_i}{2} + \binom{\nu - y}{2} \leq \binom{y-s+1}{2} + \binom{\nu - y}{2},\]
  където $y = \sum^s_{i=1}n_i$. Ясно е, че $s+1\leq y + 1\leq\nu$.
  Случаят $y = s$ е тривиален, нека $y > s$.
  Искаме да докажем, че 
  \[\binom{y-s+1}{2} + \binom{\nu - y}{2} \leq \binom{\nu - (s+1) + 1}{2} = \binom{\nu-y}{2} + \binom{y-s}{2} + \binom{\nu-y}{1}\binom{y-s}{1} \]
  \[\binom{y-s+1}{2} \leq  \binom{y-s}{2} + (\nu-y)(y-s) \]
  Като положим $x = y-s+1$, получаваме
  \[\binom{x}{2} \leq  \binom{x-1}{2} + (\nu-y)(x-1) \]
  \[x-1 \leq (\nu-y)(x-1) \iff 1 \leq \nu - y \iff y+1 \leq \nu\]
\end{proof}

\begin{remark}
  Ако $G$ е свързан, то \[\nu-1\leq\varepsilon\leq\binom{\nu}{2}\]
\end{remark}


\section{Изоморфизъм на графи}

\begin{itemize}
\item
  Два графа $G = (V,E)$ и $G' = (V',E')$ са {\bf изоморфни},
  което означаваме като $G \cong G'$, ако съществува биекция $\psi:V\to V'$ със свойството:
  \[(u,v) \in E \iff (\psi(u),\psi(v)) \in E'.\]
\end{itemize}

\section{Дървета}

\begin{dfn}
  Дърво е свързан граф без цикли.
\end{dfn}

\begin{thm}
  В дърво, между всеки два върха има единствен път.
\end{thm}

\begin{thm}
  Ако $G$ е дърво, то $\varepsilon(G) = \nu(G) - 1$.
\end{thm}
\begin{proof}
  С индукция по $\nu$. За $\nu = 1$ е ясно.
  Да допуснем за $G$ с брой ребра $<\nu$ и ще докажем за $G$.
  Нека $uv\in E$ и $G'$ се получава като изтрием това ребро.
  Получаваме два свързани ациклични графа $G_1, G_2$.
  Следователно те са дървета и от и.п. 
  \[\varepsilon(G_1) = \nu(G_1) - 1\ \&\ \varepsilon(G_2) = \nu(G_2) - 1.\]
  Получаваме, че 
  \[\varepsilon(G - uv) = \varepsilon(G_1) + \varepsilon(G_2) = \nu(G_1) + \nu(G_2) - 2.\]
  Накрая, $\varepsilon(G) = \varepsilon(G-uv) + 1 = \nu(G_1) + \nu(G_2) - 2 + 1= \nu(G) - 1$.
\end{proof}

\begin{crl}
  Всяко нетривиално дърво има поне два върха със степен 1.
\end{crl}
\begin{proof}
  Ясно е, че $(\forall v\in V)[d(v) \geq 1]$.
  Знаем, че \[\sum_{v\in V}d(v) = 2\varepsilon = 2\nu - 2,\] от където следва, че има поне два върха със степен 1.
\end{proof}



\subsection{Покриващи дървета}

Означаваме с $\tau(G)$ броят на покриващите дървета на $G$ (не неизоморфните, а всички).

Нека $u\neq v, e = (u,v)\in E$. С $G.e = (E',V')$ означаваме графа получен от $G$, като премахваме реброто $e$ и 
съединяваме краищата $u,v$. Ясно е, че $\nu(G.e) = \nu(G) - 1, \varepsilon(G.e) = \varepsilon(G) - 1, \omega(G.e) = \omega(G)$.

\begin{thm}
  Ако $e\in E$ не е примка, то
  $\tau(G) = \tau(G-e) + \tau(G.e)$.
\end{thm}
\begin{proof}
  $\tau(G) = n + m$, където $n$ е броят на покриващите дървета на $G$, в които не участва $e$
  и $m$ е броят на покриващите дървета, в които участва $e$.
  Ясно е, че $n = \tau(G-e)$.
  На всяко покриващо дърво $T$, в което участва $e$, съответства покриващо дърво $T.e$ на $G.e$.
  Това съответствие е взаимно-еднозначно, следователно $m = \tau(G.e)$.
\end{proof}

\begin{problem}
  Колко на брой са всички изоморфни и неизоморфни покриващи дървета на $K_3,K_4$ ?
\end{problem}


\begin{problem}
  Покажете, че ако $G$ е дърво и има връх със степен $\geq k$, то $G$ има поне $k$ върха със степен 1.
\end{problem}

\begin{problem}
  Нека $G$ е свързан граф.
  Докажете, че всеки два най-дълги пътя в свързан граф имат общ връх.
\end{problem}

\begin{problem}
  За $G$ прост граф, докажете, че $\varepsilon = \binom{\nu}{2}$ т.с.т.к. $G$ е пълен.
\end{problem}

\begin{problem}
  Докажете, че в граф с $\nu\geq 2$, има поне два върха с еднаква степен.
\end{problem}

\begin{problem}
  Докажете, че:
  \begin{enumerate}
  \item
    във всеки неориентиран граф броят на върховете с нечетна степен е четен;
  \item
    всеки регулярен граф с нечетна степен има четен брой върхове;
  \item
    всеки граф с $\varepsilon > \binom{\nu-1}{2}$ е свързан.
    Дайде пример за несвързан граф с $\varepsilon = \binom{\nu-1}{2}$.
  \item
    във граф всички върхове имат степен поне $d$.
    Докажете, че в графа има път с дължина $d$.
  \end{enumerate}
\end{problem}


\begin{problem} % зад. 1.22
  Да разгледаме графа $G$ (без примки и без кратни ребра) със $s$ компоненти на свързаност.
  Докажете, че $\nu - s \leq \varepsilon \leq \binom{\nu-s+1}{2}$.
\end{problem}

\begin{problem}
  Нега $G$ е граф с $n$ върха и в $G$ няма прост цикъл с дължина 3.
  Докажете, че $G$ има най-много $\lfloor{\frac{n^2}{4}}\rfloor$ ребра.
\end{problem}

\begin{problem}
  Нека $G$ е произволен граф без примки и кратни ребра, а $\overline{G}$ е неговото допълнение.
  Докажете, че поне един от графите $G$, $\overline{G}$ е свързан;
\end{problem}


\begin{problem}
  \begin{enumerate}
  \item
    Да се построят всички неизоморфни графи на 1,2,3 и 4 върха.
  \item
    Намерете броя на ребрата на граф без цикли с $n$ върха и $k$ компоненти.
  \end{enumerate}
\end{problem}


\section*{Бележки}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "discrete-math"
%%% End: 
